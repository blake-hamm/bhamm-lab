# TODO: Put this in group vars
- name: Build alias definitions
  ansible.builtin.set_fact:
    common_aliases: >-
      {%- set aliases = {} -%} {%- for interface in opnsense_interface_map -%}
        {%- set _ = aliases.update({
          interface.name + '_NetworkIP': {
            'type': 'host',
            'description': 'IP for ' + interface.name + ' host',
            'content': interface.address
          },
          interface.name + '_Network': {
            'type': 'network',
            'description': 'Network range for ' + interface.name,
            'content': interface.subnet
          }
        }) -%}
      {%- endfor -%} {{ aliases }}
- name: Common Aliases
  ansibleguy.opnsense.alias_multi:
    aliases: "{{ common_aliases }}"
- name: Specific aliases
  ansibleguy.opnsense.alias_multi:
    aliases:
      PrivateNetworks:
        type: 'network'
        description: 'Private ip network ranges'
        content: "{{ private_networks }}"
      Framework:
        type: 'host'
        description: 'Framework laptop'
        content: 10.0.80.2
      TrustedIOT:
        type: 'host'
        description: 'Trusted IOT devices'
        content: 10.0.60.2-10.0.60.50
