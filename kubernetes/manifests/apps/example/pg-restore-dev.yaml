apiVersion: snapshot.storage.k8s.io/v1
kind: VolumeSnapshotContent
metadata:
  name: example-restore
  annotations:
    snapshot.storage.kubernetes.io/deletion-secret-name: csi-rbd-secret
    snapshot.storage.kubernetes.io/deletion-secret-namespace: ceph
    argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true
    argocd.argoproj.io/sync-wave: "-3"
spec:
  deletionPolicy: Delete
  driver: rbd.csi.ceph.com
  source:
    snapshotHandle: 0001-0024-7b02e4a9-b740-4d5a-b519-9585725a55fb-0000000000000003-e5669fda-92e1-4d33-b8bf-7f58d761ae1b
  sourceVolumeMode: Filesystem
  volumeSnapshotClassName: ceph-snapclass
  volumeSnapshotRef:
    apiVersion: snapshot.storage.k8s.io/v1
    kind: VolumeSnapshot
    name: example-restore
    namespace: example
---
apiVersion: snapshot.storage.k8s.io/v1
kind: VolumeSnapshot
metadata:
  name: example-restore
  namespace: example
  annotations:
    argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true
    argocd.argoproj.io/sync-wave: "-2"
spec:
  volumeSnapshotClassName: ceph-snapclass
  source:
    volumeSnapshotContentName: example-restore
